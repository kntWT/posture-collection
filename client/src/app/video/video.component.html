<div cdkOverlayOrigin #trigger="cdkOverlayOrigin"></div>

<div>
    <div style="width: 100%; text-align: center;">
        <button (click)="decrementSetId()" [disabled]="disableDecrementSetId()">-</button>
        <span>{{ setId }}</span>
        <button (click)="incrementSetId()" [disabled]="disableIncrementSetId()">+</button>
    </div>
    <div  class="video-frame">
        <video
            id="video"
            muted
            playsinline
            outline
        ></video>
    </div>
    <div class="ui-pannel">
        <div *ngIf="isPlaying; else play">
            <button mat-icon-button (click)="handlePause()">
                <mat-icon>pause</mat-icon>
            </button>
        </div>
        <ng-template #play>
            <button mat-icon-button (click)="handlePlay()" [disabled]="!isPlayable">
                <mat-icon>play_arrow</mat-icon>
            </button>
        </ng-template>

        <div *ngIf="isPlaying">
            <button mat-raised-button (click)="calibrate()">
                キャリブレーション
            </button>
        </div>
    </div>
</div>

<ng-template
    cdkConnectedOverlay
    [cdkConnectedOverlayOrigin]="trigger"
    [cdkConnectedOverlayOpen]="openOverlay"
>
    <div class="overlay">
        <div>
            <button 
                mat-raised-button
                color="primary"
                (click)="handleAllowCameraPermission()"
                [disabled]="allowCameraPermission"
                class="my-4"
            >
                カメラへのアクセスを許可する
            </button>
        </div>
        <div>
            <button
                mat-raised-button
                color="primary"
                (click)="handleAllowOrientationPermission()"
                [disabled]="allowOrientationPermission"
                class="my-4"
            >
                動作と方向へのアクセスを許可する
            </button>
        </div>
        <div>
            <button
                mat-raised-button
                color="primary"
                (click)="handleAllowMotionPermission()"
                [disabled]="allowMotionPermission"
                class="my-4"
            >
                加速度センサへのアクセスを許可する
            </button>
        </div>
    </div>
</ng-template>
